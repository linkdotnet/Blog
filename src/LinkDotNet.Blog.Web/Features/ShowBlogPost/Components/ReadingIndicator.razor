@inject IJSRuntime JSRuntime

<div class="progress-container">
    <svg class="progress-circle" viewBox="0 0 36 36">
        <circle class="progress-bg" cx="18" cy="18" r="15.91549431" />
        <circle class="progress-bar" id="progressBar" cx="18" cy="18" r="15.91549431" />
    </svg>
</div>

<style>
.progress-container {
    position: fixed;
    bottom: 20px;
    right: 20px;
    z-index: 1000;
    opacity: 0;
    transition: opacity 0.5s;
}

.progress-container.visible {
    opacity: 1;
}

@@keyframes fadeOut {
    to {
        opacity: 0;
    }
}

.progress-circle {
    width: 50px;
    height: 50px;
}

.progress-bg {
    fill: none;
    stroke: #f3f3f3;
    stroke-width: 4;
}

.progress-bar {
    fill: none;
    stroke: #4caf50;
    stroke-width: 4;
    stroke-linecap: round;
    transform-origin: center;
    transform: rotate(-90deg);
    stroke-dasharray: 100, 100;
    stroke-dashoffset: 100;
}

</style>

@code {
	protected override async Task OnAfterRenderAsync(bool firstRender)
	{
		if (firstRender)
		{
			await using var _ = await JSRuntime.InvokeAsync<IJSObjectReference>("import", "./Features/ShowBlogPost/Components/ReadingIndicator.razor.js");
			await JSRuntime.InvokeVoidAsync("initCircularReadingProgress");
		}
	}
}
